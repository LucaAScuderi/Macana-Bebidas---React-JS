(this.webpackJsonpmacanabebidas=this.webpackJsonpmacanabebidas||[]).push([[0],{116:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(32),r=c.n(s),i=(c(87),c(80)),o=c(42),l=c(7),d=c(3),j=Object(a.createContext)(),b=function(e){var t=e.children,c=Object(a.useState)([]),n=Object(l.a)(c,2),s=n[0],r=n[1];return Object(a.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(s))}),[s]),Object(d.jsx)(j.Provider,{value:{carrito:s,addToCart:function(e){r([].concat(Object(o.a)(s),[e]))},removeItem:function(e){var t=s.filter((function(t){return t.id!==e}));r(t)},calcularCantidad:function(){return s.reduce((function(e,t){return e+t.cantidad}),0)},vaciarCarrito:function(){r([])},productAdded:function(e){return s.some((function(t){return t.id===e}))},calcularTotal:function(){return s.reduce((function(e,t){return e+t.cantidad*t.price}),0)}},children:t})},m=(c(89),function(){var e=Object(a.useContext)(j).calcularCantidad;return Object(d.jsxs)("div",{className:"".concat(0===e()?"shoppingCartIconEmpty mb-2":"shoppingCartIcon mb-0"),children:[Object(d.jsx)(i.a,{}),Object(d.jsx)("p",{className:"".concat(0===e()?"d-none":"badge text-success fs-5 ms-1 p-0"),children:e()})]})}),u=c(20),h=c(125),x=c(122),O=c(126),p=c(124),f=function(e){var t=e.brand;return Object(d.jsx)("header",{children:Object(d.jsx)(h.a,{bg:"dark",variant:"dark",expand:"lg",children:Object(d.jsxs)(x.a,{children:[Object(d.jsx)(u.b,{className:"navbar-brand",to:"/",children:t}),Object(d.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(O.a,{className:"ms-auto",children:[Object(d.jsx)(u.c,{className:"nav-link",activeClassName:"active",exact:!0,to:"/",children:"Home"}),Object(d.jsxs)(p.a,{className:"ms-lg-2 me-lg-2",title:"Filtro de bebidas",id:"dropdown-split-basic",menuVariant:"dark",children:[Object(d.jsx)(u.c,{className:"dropdown-item",activeClassName:"active",exact:!0,to:"/productos/fernet",children:"Fernet"}),Object(d.jsx)(u.c,{className:"dropdown-item",activeClassName:"active",exact:!0,to:"/productos/cerveza",children:"Cerveza"}),Object(d.jsx)(u.c,{className:"dropdown-item",activeClassName:"active",exact:!0,to:"/productos/vodka",children:"Vodka"})]}),Object(d.jsx)(u.c,{to:"/cart",children:Object(d.jsx)(m,{})})]})})]})})})},g=c(4),v=(c(96),c(97),function(e){e.name;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"containerLoading",children:[Object(d.jsx)("img",{src:"../MacanasBro-01.png",alt:"Macana Bro's Logo",className:"imgLoading"}),Object(d.jsx)("span",{children:"Cargando..."})]})})}),N=c(123),y=c(127),C=c(79),k=function(e){var t=e.id,c=e.name,a=e.price,n=e.img,s=e.description,r=e.quantity;e.category;return Object(d.jsx)(N.a,{md:4,lg:3,className:"my-5 d-flex justify-content-center",children:Object(d.jsx)(u.b,{to:"/detail/".concat(t),style:{textDecoration:"none"},children:Object(d.jsxs)(y.a,{className:"bg-dark text-white",style:{width:"15rem"},children:[Object(d.jsx)(y.a.Img,{variant:"top",src:n,meta:c}),Object(d.jsxs)(y.a.Body,{className:"d-grid",children:[Object(d.jsxs)(y.a.Title,{className:"h6",children:[c," ",s," ",r]}),Object(d.jsxs)(y.a.Text,{className:"mt-3 mb-3 d-flex justify-content-center h5",children:["$ ",a,",00"]}),Object(d.jsx)(C.a,{variant:"btn btn-outline-secondary text-white",children:"Ver detalle"})]})]})})})},w=function(e){var t=e.productos,c=void 0===t?[]:t;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{className:"text-center mt-5",children:"NUESTROS PRODUCTOS"}),Object(d.jsx)("div",{className:"row",children:c.map((function(e){return Object(a.createElement)(k,Object(g.a)(Object(g.a)({},e),{},{key:e.id}))}))})]})},I=c(11),F=c(63),S=(c(68),F.a.initializeApp({apiKey:"AIzaSyCgCvyQ2ukaFDU7h0hwgFOFHa4OKxm5i7A",authDomain:"macanabebidas.firebaseapp.com",projectId:"macanabebidas",storageBucket:"macanabebidas.appspot.com",messagingSenderId:"1077254058925",appId:"1:1077254058925:web:9cec2e8adce9392e996724"})),T=function(){return F.a.firestore(S)},E=function(e){e.greeting;var t=Object(a.useState)([]),c=Object(l.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(!0),i=Object(l.a)(r,2),o=i[0],j=i[1],b=Object(I.h)().categoryId;return Object(a.useEffect)((function(){j(!0);var e=T();(b?e.collection("productos").where("category","==",b):e.collection("productos")).get().then((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));s(t)})).catch((function(e){return console.log(e)})).finally((function(){j(!1)}))}),[b,j]),Object(d.jsx)(d.Fragment,{children:o?Object(d.jsx)(v,{}):Object(d.jsx)(w,{productos:n})})},A=function(e){var t=e.cantidad,c=e.modify,a=e.max;return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"btn btn-sm ".concat(t<1?"btn-danger disabled":"btn-secondary"),onClick:function(){t>=1&&c(t-1)},children:"-"}),Object(d.jsx)("span",{className:"mx-3",children:t}),Object(d.jsx)("button",{className:"btn btn-sm ".concat(t===a?"btn-danger disabled":"btn-secondary"),onClick:function(){t<a&&c(t+1)},children:"+"})]})},D=(c(71),function(e){var t=e.id,c=e.name,n=e.price,s=e.img,r=e.description,i=e.category,o=e.quantity,b=e.stock,m=Object(I.g)(),h=m.goBack,x=m.push,O=Object(a.useContext)(j),p=O.addToCart,f=O.productAdded,g=Object(a.useState)(0),v=Object(l.a)(g,2),N=v[0],y=v[1];return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("nav",{"aria-label":"breadcrumb",children:Object(d.jsxs)("ol",{className:"breadcrumb mt-3",children:[Object(d.jsx)("button",{className:"btn breadcrumb-item text-white",onClick:function(){return x("/")},children:"Volver al inicio"}),Object(d.jsxs)("button",{className:"btn breadcrumb-item text-white",onClick:function(){return h()},children:[" ","Volver atr\xe1s"]})]})}),Object(d.jsx)("div",{className:"card border border-1 rounded-3 shadow-lg",children:Object(d.jsxs)("div",{className:"row container-fluid",children:[Object(d.jsx)("div",{className:"col-12 col-sm-8 col-md-6 d-flex justify-content-end mt-3",children:Object(d.jsx)("img",{src:s,className:"img-fluid",alt:c})}),Object(d.jsx)("div",{className:"col-12 col-sm-4 d-flex",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("h1",{className:"card-title",children:[c," ",r]}),Object(d.jsx)("h5",{className:"card-text text-secondary lead",children:o}),Object(d.jsx)("h5",{className:"card-text mt-3",children:Object(d.jsxs)("small",{className:"text-muted",children:["$ ",n,",00"]})}),f(t)?Object(d.jsxs)("div",{className:"row py-5 d-flex",children:[Object(d.jsx)("div",{className:"col-5",children:Object(d.jsx)(u.b,{to:"/cart",className:"btn btn-success  bg-gradient mb-2",children:"Ir al carrito"})}),Object(d.jsx)("div",{className:"col-6",children:Object(d.jsx)(u.b,{to:"/",className:"btn btn-info text-white",children:"Seguir comprando"})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h5",{className:"mt-5",children:Object(d.jsx)(A,{cantidad:N,modify:y,max:b})}),Object(d.jsx)("p",{className:"text-success small",children:b<19?"\xa1Apurate! \xa1Solo quedan ".concat(b," unidades!"):"".concat(b," unidades disponibles.")}),Object(d.jsx)("button",{className:"btn mt-4 btn-success",onClick:function(){N>0&&p({id:t,name:c,description:r,price:n,category:i,cantidad:N,img:s})},children:"Agregar al carrito"})]})]})})]})})]})})}),z=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!1),r=Object(l.a)(s,2),i=r[0],o=r[1],j=Object(I.h)().itemId;return Object(a.useEffect)((function(){o(!0),T().collection("productos").doc(j).get().then((function(e){n(Object(g.a)({id:e.id},e.data()))})).catch((function(e){console.log(e)})).finally((function(){o(!1)}))}),[j,o]),Object(d.jsx)("div",{className:"pb-4 p-3 p-sm-0 bgItemDetailContainer",children:i?Object(d.jsx)(v,{}):Object(d.jsx)(D,Object(g.a)({},c))})},B=(c(98),c(99),function(){var e=Object(a.useContext)(j),t=e.carrito,c=e.vaciarCarrito,n=e.removeItem,s=Object(I.g)().push;return Object(d.jsxs)(d.Fragment,{children:[t.map((function(e){return Object(d.jsxs)("div",{className:"col-md-6 col-12 mt-3 gx-5",children:[Object(d.jsxs)("div",{className:"row border rounded p-2",id:"cardCartItem",children:[Object(d.jsx)("div",{className:"col-5",children:Object(d.jsx)("img",{src:e.img,alt:e.name+e.description,className:"img-fluid"})}),Object(d.jsxs)("div",{className:"col-7 d-grid justify-content-start align-items-center border-2 border-",children:[Object(d.jsx)("div",{className:"container-fluid",children:Object(d.jsxs)("h4",{className:"text-primary",children:[e.name," ",e.description]})}),Object(d.jsx)("div",{className:"container-fluid",children:Object(d.jsxs)("h5",{children:[e.cantidad,"u."," ",Object(d.jsx)("span",{className:"text-muted small",children:"x"})," $ ",e.price,",00"]})}),Object(d.jsx)("div",{className:"container-fluid mt-4",children:Object(d.jsxs)("h3",{className:"text-success",children:["$ ",e.price*e.cantidad,",00"]})})]})]},e.id),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-6 col-sm-2 mb-5 bg-transparent",children:Object(d.jsx)("button",{className:"text-primary border-0 bg-transparent",onClick:function(){return n(e.id)},children:"Eliminar"})}),Object(d.jsx)("div",{className:"col-6 col-sm-5 mb-5 bg-transparent",children:Object(d.jsx)("button",{className:"text-primary border-0 bg-transparent",onClick:function(){n(e.id),s("/detail/".concat(e.id))},children:"Modificar cantidad"})})]})]})})),Object(d.jsx)(u.b,{to:"/checkout",className:"btn btn-primary ",children:"Terminar compra"}),Object(d.jsx)("button",{className:"btn btn-danger mt-2",onClick:c,children:"Vaciar Carrito"})]})}),P=function(){var e=Object(a.useContext)(j),t=e.carrito,c=e.calcularTotal;return Object(d.jsx)("main",{className:"container my-5",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-6",children:[Object(d.jsx)("h2",{children:"Resumen de compra"}),Object(d.jsxs)("h6",{className:"text-muted",children:[t.length," producto/s agregado/s."]})]}),Object(d.jsx)("div",{className:"col-6",children:Object(d.jsxs)("h3",{className:"display-6 text-secondary  d-flex justify-content-end",children:["PRECIO TOTAL: $ ",c(),",00"]})}),Object(d.jsx)("hr",{}),Object(d.jsx)(d.Fragment,{children:0===t.length?Object(d.jsx)("h2",{className:"text-center display-3 mt-5",children:"No hay items en el carrito"}):Object(d.jsx)(B,{})})]})})},L=c(16),V=c(57),M=c.n(V),$=c(43),R=c.n($),q=c(65),J=c(66),U=function(){var e=Object(q.a)(R.a.mark((function e(t,c,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(q.a)(R.a.mark((function e(n,s){var r,i,o,l,d,j,b;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={buyer:{datos:t},items:c,total:a,date:J.a.firestore.Timestamp.fromDate(new Date)},i=T(),o=i.collection("orders"),l=i.collection("productos").where(J.a.firestore.FieldPath.documentId(),"in",c.map((function(e){return e.id}))),e.next=6,l.get();case 6:d=e.sent,j=i.batch(),b=[],d.docs.forEach((function(e){var t=c.find((function(t){return t.id===e.id}));e.data().stock>=t.cantidad?j.update(e.ref,{stock:e.data().stock-t.cantidad}):b.push(Object(g.a)(Object(g.a)({},e.data()),{},{id:e.id}))})),0===b.length?o.add(r).then((function(e){j.commit(),n(e.id)})).catch((function(e){s(e)})):s(b);case 11:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(a.useContext)(j),t=e.carrito,c=e.calcularTotal,n=e.vaciarCarrito,s=Object(a.useState)(!1),r=Object(l.a)(s,2),i=r[0],o=r[1],b=Object(a.useState)({nombre:"",apellido:"",email:"",tel:""}),m=Object(l.a)(b,2),u=m[0],h=m[1],x=function(e){h(Object(g.a)(Object(g.a)({},u),{},Object(L.a)({},e.target.name,e.target.value)))},O=function(e){e.preventDefault(),0!==u.nombre.length&&0!==u.apellido.length&&0!==u.email.length&&0!==u.tel.length?(o(!0),U(u,t,c()).then((function(e){M.a.fire({icon:"success",title:"Orden registrada N\xb0: ".concat(e),text:"No pierdas tu n\xfamero de orden. A la brevedad nos comunicaremos para finalizar la compra."})})).catch((function(e){M.a.fire({icon:"error",title:"Producto sin stock.",text:"No hay stock de: ".concat(e.map((function(e){return e.name})).join(", "))})})).finally((function(){n(),o(!1)}))):M.a.fire({icon:"warning",title:"Oops...",text:"\xa1Todav\xeda hay campos vac\xedos!"})};return Object(d.jsxs)(d.Fragment,{children:[0===t.length&&Object(d.jsx)(I.a,{to:"/"}),i&&Object(d.jsx)(v,{}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"text-center mt-4 display-3",children:"Finalizar compra"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("h2",{className:"ms-5",children:[t.length," producto/s en el carrito."]}),Object(d.jsx)("div",{className:"container my-5",children:Object(d.jsxs)("form",{onSubmit:O,children:[Object(d.jsx)("h2",{className:"mb-5",children:"Complete sus datos para la finalizaci\xf3n de la compra."}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:u.nombre,onChange:x}),0===u.nombre.length&&Object(d.jsx)("small",{className:"text-muted",children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:u.apellido,onChange:x}),0===u.apellido.length&&Object(d.jsx)("small",{className:"text-muted",children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:u.email,onChange:x}),0===u.email.length&&Object(d.jsx)("small",{className:"text-muted",children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"tel",placeholder:"Tel\xe9fono",name:"tel",value:u.tel,onChange:x}),0===u.tel.length&&Object(d.jsx)("small",{className:"text-muted",children:"Este campo es obligatorio"}),Object(d.jsx)("button",{className:"btn btn-success col-12 mt-5",onClick:O,disabled:i,children:"Finalizar"})]})})]})]})};var K=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(b,{children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)(f,{brand:"Macana Bebidas"}),Object(d.jsxs)(I.d,{children:[Object(d.jsx)(I.b,{exact:!0,path:"/",children:Object(d.jsx)(E,{})}),Object(d.jsx)(I.b,{exact:!0,path:"/productos/:categoryId",children:Object(d.jsx)(E,{})}),Object(d.jsx)(I.b,{exact:!0,path:"/detail/:itemId",children:Object(d.jsx)(z,{})}),Object(d.jsx)(I.b,{exact:!0,path:"/contacto",children:Object(d.jsx)("h1",{children:"Contacto"})}),Object(d.jsx)(I.b,{path:"/cart",children:Object(d.jsx)(P,{})}),Object(d.jsx)(I.b,{exact:!0,path:"/checkout",children:Object(d.jsx)(H,{})})]})]})})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,128)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root")),Q()},71:function(e,t,c){},87:function(e,t,c){},89:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){},99:function(e,t,c){}},[[116,1,2]]]);
//# sourceMappingURL=main.74cef24f.chunk.js.map